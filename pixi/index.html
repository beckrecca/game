<!doctype html>
<html>
<head>
	<script src="js/pixi.min.js"></script>
	<script src="js/scene.js"></script>
	<script src="js/backgroundmap.js"></script>
	<script src="js/interactmap.js"></script>
	<script src="js/spritemap.js"></script>
	<script src="js/texturemap.js"></script>
	<script src="js/controls.js"></script>
	<script src="js/setup.js"></script>
</head>
<body>
	<script>
		//Aliases
		const Application = PIXI.Application,
		base = PIXI.BaseTexture,
		loader = PIXI.Loader.shared,
		resources = PIXI.Loader.shared.resources,
		Sprite = PIXI.Sprite,
		tileMap = PIXI.Tilemap,
		tilingSprite = PIXI.TilingSprite,
		utils = PIXI.utils;

		//Create a Pixi Application
		const app = new Application({ 
			width: 512, 
			height: 512,                       
			antialias: true, 
			transparent: false, 
			resolution: 1
			}
		);

		// set the scene
		const scene = 'main';

		// load our assets
		loader
		.add("background","assets/maps/background.json")
		.add("build","assets/maps/tiles.json")
		.add("characters","assets/maps/characters.json")
		.add("environment","assets/maps/environment.json")
		.add("interactives","assets/maps/interactives.json")
		.load(setup);

		// initialize our sprite
		let floor, handsome, id, tiles, state;

		// gameloop
		function gameLoop(delta) {
			// update the current state
			state(delta);
		}

		// play
		function play(delta) {
			// check where our player is
			handsomeXpos = handsome.getGlobalPosition().x;
			handsomeYpos = handsome.getGlobalPosition().y;

			// if handsome is about to leave the scene, stop him
			if (handsomeXpos > 0 && handsomeXpos < 488) {
				handsome.x += handsome.vx;
			}
			else if (handsomeXpos <= 0 && handsome.vx > 0) {
				handsome.x += handsome.vx;
			}
			else if (handsomeXpos >= 480 && handsome.vx < 0) {
				handsome.x += handsome.vx;
			}
			if (handsomeYpos > 0 && handsomeYpos < 480) {
				handsome.y += handsome.vy;
			}
			else if (handsomeYpos <= 0 && handsome.vy > 0) {
				handsome.y += handsome.vy;
			}
			else if (handsomeYpos >= 480 && handsome.vy < 0) {
				handsome.y += handsome.vy;
			}
		}

		//Add the canvas that Pixi automatically created for you to the HTML document
		document.body.appendChild(app.view);
		</script>
	</body>
	</html>